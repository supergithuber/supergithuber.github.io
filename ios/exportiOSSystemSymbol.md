## ä»iOSå›ºä»¶ipswä¸­æå–ç³»ç»Ÿç¬¦å·è¡¨

æå–ç³»ç»Ÿçš„ç¬¦å·è¡¨ä¸€èˆ¬ä»iOSçœŸæœºä¸­è·å–ï¼Œä½†æ˜¯æœ‰ä¸€äº›æƒ…å†µéš¾ä»¥è·å–åˆ°å¯¹åº”ç³»ç»Ÿçš„çœŸæœºã€‚

ä¾‹å¦‚ï¼šiOS10.3.4çš„å‘å¸ƒæ—¶é—´æ˜¯2019å¹´7æœˆ23æ—¥ï¼ŒiOS10.3.3çš„å‘å¸ƒæ—¶é—´æ˜¯2017å¹´7æœˆ19æ—¥ï¼Œä¸­é—´é—´éš”äº†ä¸¤å¹´çš„æ—¶é—´ã€‚åœ¨2020å¹´ï¼Œå¦‚æœè¦è·å–iOS10.3.3çš„çœŸæœºå®åœ¨æ˜¯å¤ªéš¾äº†ï¼Œå› ä¸ºå®˜æ–¹åªæ”¯æŒå‡çº§åˆ°æœ€æ–°ç³»ç»Ÿã€‚

> iOSç³»ç»Ÿå†å²ç‰ˆæœ¬ä»¥åŠå‘å¸ƒæ—¶é—´å¯å‚è€ƒ[wiki](https://zh.wikipedia.org/wiki/IOSç‰ˆæœ¬å†å²)

è¿™ä¸ªæ—¶å€™å°±è¦ç”¨å…¶ä»–çš„æ–¹æ³•è·å–åˆ°ç³»ç»Ÿç¬¦å·è¡¨ã€‚ä¾‹å¦‚ä»ipswå›ºä»¶ä¸­è·å–ã€‚

#### å‡†å¤‡

1. å»ä¸€äº›å›ºä»¶ä¸‹è½½ç½‘ç«™[theiphonewiki.com](https://www.theiphonewiki.com/wiki/Firmware)ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„å›ºä»¶ã€‚
2. ä¸‹è½½dmgè§£å¯†å·¥å…·ï¼ŒVFDecryptå‘½ä»¤è¡Œæˆ–è€…æ˜¯å®ƒçš„å®¢æˆ·ç«¯iDecryptç­‰èƒ½å¤Ÿè§£å¯†dmgçš„å·¥å…·ã€‚æ­¤å¤„æä¾›ä¸€ä¸ª[iDecrypt](https://supergithuber.github.io/Resources/iDecrypt-Mac-build91-bennyyboi.zip)ã€‚
3. ä¸‹è½½dyldæºç ï¼Œä½¿ç”¨å…¶ä¸­çš„dsc_extractorå·¥å…·ï¼Œä¸‹è½½åœ°å€[dyldæºç ](https://opensource.apple.com/tarballs/dyld/)ï¼Œæˆ‘ä½¿ç”¨äº†dyld-519.2.2.tar.gzã€‚
4. ä¸‹è½½å®Œdyldæºç åï¼Œè§£å‹ï¼Œæ‰“å¼€è¿›å…¥launch-cacheæ‰“å¼€dsc_extractor.cppæ–‡ä»¶ï¼Œå°†é¢„å¤„ç†æŒ‡ä»¤ä»0æ”¹ä¸º1
![dyldModifyDefine](../img2/dyldModifyDefine.png)
5. è¿›å…¥åˆ°launch-cacheç›®å½•ï¼Œé€šè¿‡clangå‘½ä»¤ç¼–è¯‘dsc_extractor.cpp

```shell
clang++ -o dsc_extractor ./dsc_extractor.cpp dsc_iterator.cpp
```



#### è·å–è¿‡ç¨‹

1. å°†ä¸‹è½½æ¥çš„ipswæ”¹ä¸ºzipï¼Œè§£å‹ã€‚æ‰¾åˆ°è§£å‹ç›®å½•ä¸‹æœ€å¤§çš„å“ªä¸ªdmgæ–‡ä»¶ï¼Œå°±æ˜¯å¾…è§£å¯†çš„dmgæ–‡ä»¶ã€‚

2. é€šè¿‡iDecryptè§£å¯†dmgï¼Œè¿™é‡Œçš„keyè¦ä»ä¸‹è½½å›ºä»¶çš„ç½‘ç«™è·å–ï¼Œtheiphonewikiä¸­çš„**SHA1 Hash**
![iDecrypt](../img2/iDecryptSoftware.png)

3. è§£å‹åå¯ä»¥åŒå‡»æ‰“å¼€dmgæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­çš„`System/Library/Caches/com.apple.dyld`ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°`dyld_shared_cache_arm64ã€dyld_shared_cache_armv7sã€dyld_shared_cache_armv7`ç±»ä¼¼è¿™æ ·çš„æ–‡ä»¶ï¼Œè¿™äº›å°±æ˜¯å‹ç¼©çš„ç³»ç»Ÿåº“ã€‚

4. éœ€è¦é€šè¿‡ä¹‹å‰å‡†å¤‡çš„dsc_extractoræ¥è§£å‹è·å–ï¼Œä½¿ç”¨æ–¹æ³•

   ```shell
   ./dsc_extractor 'dyld_shared_cache_armXXæ–‡ä»¶è·¯å¾„' 'è¾“å‡ºè·¯å¾„'
   ```

5. åœ¨Xcode11ä»¥å‰ï¼Œå¦‚æœæŠŠä¸åŒçš„æ¶æ„çš„å‹ç¼©æ–‡ä»¶ï¼Œæå–åˆ°ç›¸åŒçš„è¾“å‡ºè·¯å¾„ï¼Œä¼šè‡ªåŠ¨åˆå¹¶ã€‚xcode11ä¹‹åä¸ä¼šåˆå¹¶ï¼Œå¦‚æœéœ€è¦åˆå¹¶ï¼Œè‡ªå·±é€šè¿‡lipoå‘½ä»¤åˆå¹¶ä¸€ä¸‹ã€‚

6. å‚è€ƒç³»ç»Ÿç¬¦å·è¡¨çš„ç›®å½•ç»“æ„ï¼Œç³»ç»Ÿç¬¦å·è¡¨åœ¨`~/Library/Developer/Xcode/iOS DeviceSupport`ä¸‹ï¼ŒæŠŠè¾“å‡ºè·¯å¾„çš„ä¸œè¥¿ï¼Œæ”¾åˆ°ä¸€ä¸ªç±»ä¼¼`12.4.6 (16G183)/Symbols`è¿™æ ·çš„ç›®å½•ä¸‹ï¼Œå°±å®Œæˆäº†ç³»ç»Ÿç¬¦å·è¡¨çš„æå–ã€‚ğŸ¤©
